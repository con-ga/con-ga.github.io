<html>
<head>
<style>
#sanpham > div {border: 1px solid green; margin:3px; white-space:pre}
</style>
<script type="text/javascript">
const noiDung = {};
function layTapTin(tapTin)
{
    return fetch(tapTin). then(response => response.text());
}
function layNoiDung()
{
    alert("layTapTin");
    layTapTin("danh-sach.htm"). then (danhSach => tachDanhSach(danhSach)). then(kq => {
        /*alert (noiDung);
        alert(noiDung["day-keo.htm"]);
        alert(noiDung["chi-may-nho.htm"]);*/
        for (sanPham in noiDung) {
            document.write(noiDung[sanPham]);
        }
    });
    alert("het layTapTin");
}

function tachDanhSach(danhSach)
{
    //const mang = [];
    const mang = danhSach.split("\r\n").filter(val => val != "");;
    return Promise.all(
        mang.map(tapTin => {
            return layTapTin(tapTin).then(nd => {
                noiDung[tapTin] = nd;
            });
        })
    );
}
</script>
</head>
<body>4
<div id="sanpham">
<script>
alert("layNoiDung");
layNoiDung();
alert("het layNoiDung");
</script>  
</div>  
</body>
</html>
