<body>
17
<div id="msg"></div>

<script>
var url = "text.txt";
var date = "";
function getTxt(url)
{
    if (localStorage.get("date") == undefined) {
        fetch(url).then(response => {
            date = response.headers.get("Last-Modified");
            localStorage.set("date", date);
            msg.innerHTML = "(" + date + ")";
            response.text().then(alert);
        });
    }
    else {
        var headers = new Headers();
        headers.append("If-Modified-Since", localStorage.get("date"));
        fetch(url, {headers : headers}).then((response) => {
            alert(response.status);
            if (response.status == 200) {
                date = response.headers.get("Last-Modified");
                localStorage.set("date", date);
                msg.innerHTML = "(" + date + ")";
                response.text().then(alert);
            }
        });
    }
}
//getTxt(url);
</script>
<button onclick="getTxt('text.txt');">get text file</button>

</body> 
